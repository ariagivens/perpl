{- Von Neumann's trick for simulating a fair coin with an unfair one. -}

extern unfair : Bool;

define fair =
  let c1 = unfair in
    let c2 = unfair in
      if c1 then (if c2 then fair else c1) else (if c2 then c1 else fair);

fair -- Should always be {true: 0.5, false: 0.5}
